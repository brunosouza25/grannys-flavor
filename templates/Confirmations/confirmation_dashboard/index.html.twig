

{% block body %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Iconly Icon css -->
    <link rel="stylesheet" type="text/css" href="{{ asset('front/assets/css/iconly.css') }}" />

    <!-- Style css -->
    <link rel="stylesheet" id="change-link" type="text/css" href="{{ asset('front/assets/css/style.css') }}" />
    <link rel="stylesheet" id="change-link" type="text/css" href="{{ asset('front/css/custom.css') }}" />
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@mdi/font@6.9.96/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-timepicker/1.13.18/jquery.timepicker.min.css" />
    <script src="https://code.iconify.design/2/2.1.2/iconify.min.js"></script>

    <style>
    #map{
        width: 100%;
        height: 300px;
    }
    body{
        background-color: #101010;
    }
</style>

    <div>
    <div class="row">
        <div class="col-lg-2">
            <div class="type-oprder-box confirm-ord-n">
                <div class="order-type-name">Para Confirmar</div>
                <div class="order-count-nbr confirm-ord-qtd">{{qtdtoconfirm}}</div>
            </div>
        </div>
        <div class="col-lg-2">
            <div class="type-oprder-box prepare-ord-n">
                <div class="order-type-name">A preparar</div>
                    <div class="order-count-nbr prepare-ord-qtd">{{orderqtdPrepare}}</div>
            </div>
        </div>
        <div class="col-lg-2">
            <div class="type-oprder-box waitingdrv-ord-n">
                <div class="order-type-name">Para Entregar </div>
                <div class="order-count-nbr waitingdrv-ord-qtd">{{ qtdtodelivery }}</div>
            </div>
        </div>
        <div class="col-lg-2">
            <div class="type-oprder-box pickup-ord-n">
                <div class="order-type-name">Para Recolher</div>
                <div class="order-count-nbr pickup-ord-qtd">{{qtdpickup}}</div>
            </div>
        </div>
        <div class="col-lg-2">
            <div class="type-oprder-box ondelivery-ord-n">
                <div class="order-type-name">A entregar</div>
                <div class="order-count-nbr ondelivery-ord-qtd">{{qtdindelivery}}</div>
            </div>
        </div>
{#        <div class="col-lg-2">#}
{#            <div class="type-oprder-box canceled-ord-n">#}
{#                <div class="order-type-name">Cancelado</div>#}
{#                <div class="order-count-nbr canceled-ord-qtd">1</div>#}
{#            </div>#}
{#        </div>#}
    </div>
    </div>

{#<div class="row">#}
{#    <div class="col-lg-12">#}
{#        <div id="map"></div>#}
{#    </div>#}
{#</div>#}

    <div class="container-fluid ">
    <div class="row">
        <div class="col-lg-4">
            <div class="box-list-orders ">
                <div class="order-type-name type-oprder-box box-header-list-orders confirm-ord-n" style="width: 100%;">
                    <span>PARA CONFIRMAR</span>
                </div>
                <div class="list-order-bg">
                    <div class="row">
                        <div class="col-lg-2 pb">
                            <div class="title-header-table-order"><span>Hora</span></div>
                        </div>
                        <div class="col-lg-3 pb">
                            <div class="title-header-table-order"><span>Cliente</span></div>
                        </div>
                        <div class="col-lg-2 pb">
                            <div class="title-header-table-order"><span>Total</span></div>
                        </div>
                        <div class="col-lg-2 pb">
                            <div class="title-header-table-order"><span>Tipo</span></div>
                        </div>
                        <div class="col-lg-2 pb">
                            <div class="title-header-table-order"><span>Status</span></div>
                        </div>
                        <div class="col-lg-2 pb">
                            <div class="title-header-table-order"><span></span></div>
                        </div>
                    </div>
                </div>
{#                list of orders#}
                {% for order in orderstoconfirm %}
                <div class="list-order-rg mt-2">
                    <div class="row">
                        <div class="col-lg-2 pb">
                            <div class="title-header-table-order-lint"><span>{{order.dateorder}} {{ order.timeorder }}</span></div>
                        </div>

                        {% for user in allusers %}
                            {% if user.id == order.userid %}
                            <div class="col-lg-3 pb">
                                <div class="title-header-table-order-lint"><span>{{user.name}}</span></div>
                            </div>
                            {% endif %}
                        {% endfor %}

                        <div class="col-lg-2 pb">
                            <div class="title-header-table-order-lint"><span>{{order.total}} €</span></div>
                        </div>
                        <div class="col-lg-2 pb">
                            {% if order.ordertype == 'delivery' %}
                                <div class="title-header-table-order-lint"><span>Entrega - {{ order.paymenttype }}</span></div>
                            {% else %}
                                <div class="title-header-table-order-lint"><span>Takeaway - {{ order.paymenttype }}</span></div>
                            {% endif %}
                        </div>
                        <div class="col-lg-2 pb">
                            {% if order.paymentstatus == 1 %}
                                <div class="title-header-table-order-lint"><span>Pago</span></div>
                            {% else %}
                                <div class="title-header-table-order-lint"><span>Não pago</span></div>
                            {% endif %}
                            <div class="title-header-table-order-lint"><button class="btn btn-secondary" data-toggle="modal" data-target="#showDetailOrder{{ order.id }}">Ver</button></div>
                        </div>

                    </div>
                </div>
                    <div class="modal fade" id="showDetailOrder{{ order.id }}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLongTitle">Pedido numero: #{{order.ordernr}}</h5>
                                </div>
                                <form class="confirmOrder">
                                <div class="modal-body">
                                    {% for user in allusers %}
                                        {% if user.id == order.userid %}
                                            <div class="col-lg-6 pb">
                                                <div class="title-header-table-order-lint"><span>{{user.name}} - Telefone: {{ user.contact }}</span></div>
                                            </div>
                                        {% endif %}
                                    {% endfor %}

                                    {% if order.ordertype == 'delivery' %}

                                    {% for guesta in guestaddress %}
                                        {% if guesta.idcontact == order.userid %}
                                            <div class="col-lg-9 pb">
                                               <span>{{ guesta.street }} - {{ guesta.city }} - {{ guesta.postalcode }}</span>

                                            <a target="_blank" href="https://www.google.pt/maps/place/{{guesta.lantitude}},{{guesta.longitude}}?hl=pt-PT&authuser=0">Mostra em Mapa</a>
                                            </div>
                                        {% endif %}
                                    {% endfor %}
                                    {% else %}
                                        <div class="col-lg-4 pb">
                                            <span>Levantar no Local</span>


                                        </div>
                                        {% endif %}
                                    <div class="row">
                                        <div class="col-lg-6">
                                    {% for orderlist in orderItems %}

                                    {% if orderlist.orderid == order.id %}
                                    <table style="   width: 100%;  border-bottom: 1px solid #ccc;   margin-bottom: 1rem;">
                                            <tr>
                                            <td><span class="qtd-table-cart">x{{orderlist.qtd}}</span></td>
                                            <td>
                                                <div class="item-name-cart"><span>{{ orderlist.item }}</span></div>

                                                {% for sizeMt in orderlistExtra %}
                                                    {% if sizeMt.orderid == orderlist.id %}
                                                        <div class="extas-item-cart"><span>{{ sizeMt.extratype }}: {{ sizeMt.name }} ({{ sizeMt.price }} EUR)</span></div>
                                                    {% endif %}
                                                {% endfor %}
                                                <div class="item-name-cart"><span>Comentário: {{ orderlist.comment }}</span></div>
                                            </td>
                                            <td style="text-align: right;"><span class="pruce-item-cart">{{orderlist.price}} EUR</span></td>
                                        </tr>

                                    </table>
                                    {% endif %}
                                    {% endfor %}
                                        </div>

                                        <div class="col-lg-6">
                                           <h5>Tempo de Preparação?</h5>



                                            <div class="row">
                                                <div class="col-lg-6" style="  border: 1px solid #eaeaea;  display: flex;  justify-content: center;  align-items: center;   flex-direction: column;   padding-top: 16px;">
                                                    <input id="20min" type="radio" value="20-30" name="timetoprepare">
                                                    <label for="20min">
                                                        <div  class="time-define-btn">20-30 MIN</div>
                                                    </label>

                                                </div>
                                                <div class="col-lg-6" style="  border: 1px solid #eaeaea;  display: flex;  justify-content: center;  align-items: center;   flex-direction: column;   padding-top: 16px;">

                                                <input id="30min" type="radio" value="30-40" name="timetoprepare">
                                                    <label for="30min">
                                                        <div  class="time-define-btn">30-40 MIN</div>
                                                    </label>

                                                </div>
                                                <div class="col-lg-6" style="  border: 1px solid #eaeaea;  display: flex;  justify-content: center;  align-items: center;   flex-direction: column;   padding-top: 16px;">

                                                <input id="45min" type="radio" value="40-50" name="timetoprepare">
                                                    <label for="45min">
                                                        <div  class="time-define-btn">40-50 MIN</div>
                                                    </label>

                                                </div>
                                                <div class="col-lg-6" style="  border: 1px solid #eaeaea;  display: flex;  justify-content: center;  align-items: center;   flex-direction: column;   padding-top: 16px;">

                                                <input id="60min" type="radio" value="50-60" name="timetoprepare">
                                                    <label for="60min">
                                                        <div  class="time-define-btn">50-60</div>
                                                    </label>

                                                </div>
                                                <div class="col-lg-6" style="  border: 1px solid #eaeaea;  display: flex;  justify-content: center;  align-items: center;   flex-direction: column;   padding-top: 16px;">

                                                <input id=70min" type="radio" value="60" name="timetoprepare">
                                                    <label for="70min">
                                                        <div  class="time-define-btn">60 MIN</div>
                                                    </label>

                                                </div>
{#                                                <div class="col-lg-6" style="  border: 1px solid #eaeaea;  display: flex;  justify-content: center;  align-items: center;   flex-direction: column;   padding-top: 16px;">#}

{#                                                <input id="80min" type="radio" value="80" name="timetoprepare">#}
{#                                                    <label for="80min">#}
{#                                                        <div  class="time-define-btn">80 MIN</div>#}
{#                                                    </label>#}
{#                                                </div>#}

                                            </div>

                                        </div>
                                </div>
                                </div>
                                <div class="modal-footer">
                                    <input type="hidden" name="referenceOrder" value="{{ order.ordernr }}">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
{#                                    <button type="button" class="btn btn-primary">Cancelar Pedido</button>#}
                                    <input type="submit" class="btn btn-primary" value="Confirmar Pedido"></input>
                                </div>
                                </form>
                            </div>
                        </div>
                    </div>

                {% endfor %}


            </div>
        </div>
        {% if orderPrepare|length > 0 %}
        <div class="col-lg-4">
            <div class="box-list-orders ">
                <div class="order-type-name type-oprder-box box-header-list-orders confirm-ord-n prepare-ord-n" style="width: 100%;">
                    <span>A PREPARAR</span>
                </div>
                <div class="list-order-bg">
                    <div class="row">
                        <div class="col-lg-2 pb">
                            <div class="title-header-table-order"><span>Hora</span></div>
                        </div>
                        <div class="col-lg-4 pb">
                            <div class="title-header-table-order"><span>Cliente</span></div>
                        </div>
                        <div class="col-lg-2 pb">
                            <div class="title-header-table-order"><span>Total</span></div>
                        </div>
                        <div class="col-lg-2 pb">
                            <div class="title-header-table-order"><span>Tipo</span></div>
                        </div>
                        <div class="col-lg-2 pb">
                            <div class="title-header-table-order"><span></span></div>
                        </div>
                    </div>
                </div>
                {#                list of orders#}
                {% for orderp in orderPrepare %}

                    <div class="list-order-rg mt-2">
                        <div class="row">
                            <div class="col-lg-2 pb">
                                <div class="title-header-table-order-lint"><span>{{orderp.dateorder}} {{ orderp.timeorder }}</span></div>
                            </div>

                            {% for user in allusers %}
                                {% if user.id == orderp.userid %}
                                    <div class="col-lg-4 pb">
                                        <div class="title-header-table-order-lint"><span>{{user.name}}</span></div>
                                    </div>
                                {% endif %}
                            {% endfor %}

                            <div class="col-lg-2 pb">
                                <div class="title-header-table-order-lint"><span>{{orderp.total}} €</span></div>
                            </div>
                            <div class="col-lg-2 pb">
                                {% if orderp.ordertype == 'delivery' %}
                                    <div class="title-header-table-order-lint"><span>Entrega</span></div>
                                {% else %}
                                    <div class="title-header-table-order-lint"><span>Takeaway</span></div>

                                {% endif %}
                            </div>
                            <div class="col-lg-2 pb">
                                <form class="readyorder">
                                    <input type="hidden" name="orderid" value="{{ orderp.id }}">
                                <div class="title-header-table-order-lint"><button class="btn btn-secondary">Pronto</button></div>
                                </form>
                            </div>
                        </div>
                    </div>

                    {% for orderlist in orderItems %}

                        {% if orderlist.orderid == orderp.id %}
                            <table class="list-order-rg" style="   width: 100%;  border-bottom: 1px solid #ccc; ">
                                <tr>
                                    <td><span class="qtd-table-cart">x{{orderlist.qtd}}</span></td>
                                    <td>
                                        <div class="item-name-cart"><span>{{ orderlist.item }}</span></div>

                                        {% for sizeMt in orderlistExtra %}
                                            {% if sizeMt.orderid == orderlist.id %}
                                                <div class="extas-item-cart"><span>{{ sizeMt.extratype }}: {{ sizeMt.name }} ({{ sizeMt.price }} EUR)</span></div>
                                            {% endif %}
                                        {% endfor %}
                                        <div class="item-name-cart"><span>Comentário: {{ orderlist.comment }}</span></div>
                                    </td>
                                    <td style="text-align: right;"><span class="pruce-item-cart">{{orderlist.price}} EUR</span></td>
                                </tr>

                            </table>
                        {% endif %}
                    {% endfor %}

                    {% for user in allusers %}
                        {% if user.id == orderp.userid %}
                            <div class="col-lg-12 pb">
                                <div class="title-header-table-order-lint"><span>{{user.name}} - Telefone: {{ user.contact }}</span></div>
                            </div>
                        {% endif %}
                    {% endfor %}

                    {% if orderp.ordertype == 'delivery' %}

                        {% for guesta in guestaddress %}
                            {% if guesta.idcontact == orderp.userid %}
                                <div class="col-lg-12 pb title-header-table-order-lint">
                                    <span>{{ guesta.street }} - {{ guesta.city }} - {{ guesta.postalcode }}</span>

                                    <a target="_blank" href="https://www.google.pt/maps/place/{{guesta.lantitude}},{{guesta.longitude}}?hl=pt-PT&authuser=0">Mostra em Mapa</a>
                                </div>
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                {% endfor %}


            </div>
        </div>
        {% endif %}
        {% if orderToDelivery|length > 0 %}
            <div class="col-lg-4">
                <div class="box-list-orders ">
                    <div class="order-type-name type-oprder-box box-header-list-orders confirm-ord-n waitingdrv-ord-n" style="width: 100%;">
                        <span>ENTREGUE PARA O DELIVERY</span>
                    </div>
                    <div class="list-order-bg">
                        <div class="row">
                            <div class="col-lg-2 pb">
                                <div class="title-header-table-order"><span>Hora</span></div>
                            </div>
                            <div class="col-lg-4 pb">
                                <div class="title-header-table-order"><span>Cliente</span></div>
                            </div>
                            <div class="col-lg-2 pb">
                                <div class="title-header-table-order"><span>Total</span></div>
                            </div>
                            <div class="col-lg-2 pb">
                                <div class="title-header-table-order"><span>Tipo</span></div>
                            </div>
                            <div class="col-lg-2 pb">
                                <div class="title-header-table-order"><span></span></div>
                            </div>
                        </div>
                    </div>
                    {#                list of orders#}
                    {% for orderp in orderToDelivery %}
                        <div class="list-order-rg mt-2">
                            <div class="row">
                                <div class="col-lg-2 pb">
                                    <div class="title-header-table-order-lint"><span>{{orderp.dateorder}} {{ orderp.timeorder }}</span></div>
                                </div>

                                {% for user in allusers %}
                                    {% if user.id == orderp.userid %}
                                        <div class="col-lg-4 pb">
                                            <div class="title-header-table-order-lint"><span>{{user.name}}</span></div>
                                        </div>
                                    {% endif %}
                                {% endfor %}

                                <div class="col-lg-2 pb">
                                    <div class="title-header-table-order-lint"><span>{{orderp.total}} €</span></div>
                                </div>
                                <div class="col-lg-2 pb">
                                    {% if orderp.ordertype == 'delivery' %}
                                        <div class="title-header-table-order-lint"><span>Entrega</span></div>
                                    {% else %}
                                        <div class="title-header-table-order-lint"><span>Takeaway</span></div>

                                    {% endif %}
                                </div>
                                <form class="ordertodelivery">
                                    <input type="hidden" name="orderid" value="{{ orderp.id }}">
                                    <input type="hidden" name="ordertype" value="{{ orderp.ordertype }}">
                                    <div class="title-header-table-order-lint"><button class="btn btn-secondary">Entregue</button></div>
                                </form>
                            </div>
                        </div>

                        {% for orderlist in orderItems %}

                            {% if orderlist.orderid == orderp.id %}
                                <table class="list-order-rg" style="   width: 100%;  border-bottom: 1px solid #ccc; ">
                                    <tr>
                                        <td><span class="qtd-table-cart">x{{orderlist.qtd}}</span></td>
                                        <td>
                                            <div class="item-name-cart"><span>{{ orderlist.item }}</span></div>

                                            {% for sizeMt in orderlistExtra %}
                                                {% if sizeMt.orderid == orderlist.id %}
                                                    <div class="extas-item-cart"><span>{{ sizeMt.extratype }}: {{ sizeMt.name }} ({{ sizeMt.price }} EUR)</span></div>
                                                {% endif %}
                                            {% endfor %}
                                            <div class="item-name-cart"><span>Comentário: {{ orderlist.comment }}</span></div>
                                        </td>
                                        <td style="text-align: right;"><span class="pruce-item-cart">{{orderlist.price}} EUR</span></td>
                                    </tr>

                                </table>
                            {% endif %}
                        {% endfor %}

                        {% for user in allusers %}
                            {% if user.id == orderp.userid %}
                                <div class="col-lg-12 pb">
                                    <div class="title-header-table-order-lint"><span>{{user.name}} - Telefone: {{ user.contact }}</span></div>
                                </div>
                            {% endif %}
                        {% endfor %}

                        {% if orderp.ordertype == 'delivery' %}

                            {% for guesta in guestaddress %}
                                {% if guesta.idcontact == orderp.userid %}
                                    <div class="col-lg-12 pb title-header-table-order-lint">
                                        <span>{{ guesta.street }} - {{ guesta.city }} - {{ guesta.postalcode }}</span>

                                        <a target="_blank" href="https://www.google.pt/maps/place/{{guesta.lantitude}},{{guesta.longitude}}?hl=pt-PT&authuser=0">Mostra em Mapa</a>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        {% endif %}


                    {% endfor %}



                </div>
            </div>
        {% endif %}
        {% if ordertoPickup|length > 0 %}
            <div class="col-lg-4">
                <div class="box-list-orders ">
                    <div class="order-type-name type-oprder-box box-header-list-orders confirm-ord-n pickup-ord-n" style="width: 100%;">
                        <span>Para Recolher</span>
                    </div>
                    <div class="list-order-bg">
                        <div class="row">
                            <div class="col-lg-2 pb">
                                <div class="title-header-table-order"><span>Hora</span></div>
                            </div>
                            <div class="col-lg-4 pb">
                                <div class="title-header-table-order"><span>Cliente</span></div>
                            </div>
                            <div class="col-lg-2 pb">
                                <div class="title-header-table-order"><span>Total</span></div>
                            </div>
                            <div class="col-lg-2 pb">
                                <div class="title-header-table-order"><span>Tipo</span></div>
                            </div>
                            <div class="col-lg-2 pb">
                                <div class="title-header-table-order"><span></span></div>
                            </div>
                        </div>
                    </div>
                    {#                list of orders#}
                    {% for orderp in ordertoPickup %}
                        <div class="list-order-rg mt-2">
                            <div class="row">
                                <div class="col-lg-2 pb">
                                    <div class="title-header-table-order-lint"><span>{{orderp.dateorder}} {{ orderp.timeorder }}</span></div>
                                </div>

                                {% for user in allusers %}
                                    {% if user.id == orderp.userid %}
                                        <div class="col-lg-4 pb">
                                            <div class="title-header-table-order-lint"><span>{{user.name}}</span></div>
                                        </div>
                                    {% endif %}
                                {% endfor %}

                                <div class="col-lg-2 pb">
                                    <div class="title-header-table-order-lint"><span>{{orderp.total}} €</span></div>
                                </div>
                                <div class="col-lg-2 pb">
                                    {% if orderp.ordertype == 'delivery' %}
                                        <div class="title-header-table-order-lint"><span>Entrega</span></div>
                                    {% else %}
                                        <div class="title-header-table-order-lint"><span>Takeaway</span></div>

                                    {% endif %}
                                </div>
                                <form class="deliveredorder">
                                    <input type="hidden" name="orderid" value="{{ orderp.id }}">
                                    <div class="title-header-table-order-lint"><button class="btn btn-secondary">Recolhido</button></div>
                                </form>
                            </div>
                        </div>

                        {% for orderlist in orderItems %}

                            {% if orderlist.orderid == orderp.id %}
                                <table class="list-order-rg" style="   width: 100%;  border-bottom: 1px solid #ccc; ">
                                    <tr>
                                        <td><span class="qtd-table-cart">x{{orderlist.qtd}}</span></td>
                                        <td>
                                            <div class="item-name-cart"><span>{{ orderlist.item }}</span></div>

                                            {% for sizeMt in orderlistExtra %}
                                                {% if sizeMt.orderid == orderlist.id %}
                                                    <div class="extas-item-cart"><span>{{ sizeMt.extratype }}: {{ sizeMt.name }} ({{ sizeMt.price }} EUR)</span></div>
                                                {% endif %}
                                            {% endfor %}
                                            <div class="item-name-cart"><span>Comentário: {{ orderlist.comment }}</span></div>
                                        </td>
                                        <td style="text-align: right;"><span class="pruce-item-cart">{{orderlist.price}} EUR</span></td>
                                    </tr>

                                </table>
                            {% endif %}
                        {% endfor %}

                        {% for user in allusers %}
                            {% if user.id == orderp.userid %}
                                <div class="col-lg-12 pb">
                                    <div class="title-header-table-order-lint"><span>{{user.name}} - Telefone: {{ user.contact }}</span></div>
                                </div>
                            {% endif %}
                        {% endfor %}

                        {% if orderp.ordertype == 'delivery' %}

                            {% for guesta in guestaddress %}
                                {% if guesta.idcontact == orderp.userid %}
                                    <div class="col-lg-12 pb title-header-table-order-lint">
                                        <span>{{ guesta.street }} - {{ guesta.city }} - {{ guesta.postalcode }}</span>

                                        <a target="_blank" href="https://www.google.pt/maps/place/{{guesta.lantitude}},{{guesta.longitude}}?hl=pt-PT&authuser=0">Mostra em Mapa</a>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        {% endif %}

                    {% endfor %}


                </div>
            </div>
        {% endif %}
        {% if orderindelivery|length > 0 %}
            <div class="col-lg-4">
                <div class="box-list-orders ">
                    <div class="order-type-name type-oprder-box box-header-list-orders confirm-ord-n ondelivery-ord-n" style="width: 100%;">
                        <span>A ENTREGAR</span>
                    </div>
                    <div class="list-order-bg">
                        <div class="row">
                            <div class="col-lg-2 pb">
                                <div class="title-header-table-order"><span>Hora</span></div>
                            </div>
                            <div class="col-lg-4 pb">
                                <div class="title-header-table-order"><span>Cliente</span></div>
                            </div>
                            <div class="col-lg-2 pb">
                                <div class="title-header-table-order"><span>Total</span></div>
                            </div>
                            <div class="col-lg-2 pb">
                                <div class="title-header-table-order"><span>Tipo</span></div>
                            </div>
                            <div class="col-lg-2 pb">
                                <div class="title-header-table-order"><span></span></div>
                            </div>
                        </div>
                    </div>
                    {#                list of orders#}
                    {% for orderp in orderindelivery %}
                        <div class="list-order-rg mt-2">
                            <div class="row">
                                <div class="col-lg-2 pb">
                                    <div class="title-header-table-order-lint"><span>{{orderp.dateorder}} {{ orderp.timeorder }}</span></div>
                                </div>

                                {% for user in allusers %}
                                    {% if user.id == orderp.userid %}
                                        <div class="col-lg-4 pb">
                                            <div class="title-header-table-order-lint"><span>{{user.name}}</span></div>
                                        </div>
                                    {% endif %}
                                {% endfor %}

                                <div class="col-lg-2 pb">
                                    <div class="title-header-table-order-lint"><span>{{orderp.total}} €</span></div>
                                </div>
                                <div class="col-lg-2 pb">
                                    {% if orderp.ordertype == 'delivery' %}
                                        <div class="title-header-table-order-lint"><span>Entrega</span></div>
                                    {% else %}
                                        <div class="title-header-table-order-lint"><span>Takeaway</span></div>
                                    {% endif %}
                                </div>
                                <form class="deliveredorder">
                                    <input type="hidden" name="orderid" value="{{ orderp.id }}">
                                    <div class="title-header-table-order-lint"><button class="btn btn-secondary">Entregue</button></div>
                                </form>
                            </div>
                        </div>

                        {% for orderlist in orderItems %}

                            {% if orderlist.orderid == orderp.id %}
                                <table class="list-order-rg" style="   width: 100%;  border-bottom: 1px solid #ccc; ">
                                    <tr>
                                        <td><span class="qtd-table-cart">x{{orderlist.qtd}}</span></td>
                                        <td>
                                            <div class="item-name-cart"><span>{{ orderlist.item }}</span></div>

                                            {% for sizeMt in orderlistExtra %}
                                                {% if sizeMt.orderid == orderlist.id %}
                                                    <div class="extas-item-cart"><span>{{ sizeMt.extratype }}: {{ sizeMt.name }} ({{ sizeMt.price }} EUR)</span></div>
                                                {% endif %}
                                            {% endfor %}
                                            <div class="item-name-cart"><span>Comentário: {{ orderlist.comment }}</span></div>
                                        </td>
                                        <td style="text-align: right;"><span class="pruce-item-cart">{{orderlist.price}} EUR</span></td>
                                    </tr>

                                </table>
                            {% endif %}
                        {% endfor %}

                        {% for user in allusers %}
                            {% if user.id == orderp.userid %}
                                <div class="col-lg-12 pb">
                                    <div class="title-header-table-order-lint"><span>{{user.name}} - Telefone: {{ user.contact }}</span></div>
                                </div>
                            {% endif %}
                        {% endfor %}

                        {% if orderp.ordertype == 'delivery' %}

                            {% for guesta in guestaddress %}
                                {% if guesta.idcontact == orderp.userid %}
                                    <div class="col-lg-12 pb title-header-table-order-lint">
                                        <span>{{ guesta.street }} - {{ guesta.city }} - {{ guesta.postalcode }}</span>

                                        <a target="_blank" href="https://www.google.pt/maps/place/{{guesta.lantitude}},{{guesta.longitude}}?hl=pt-PT&authuser=0">Mostra em Mapa</a>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        {% endif %}

                    {% endfor %}


                </div>
            </div>
        {% endif %}

    </div>
    </div>


    <!-- jquery 3.6.0 -->
    <script src="{{ asset('front/assets/js/jquery-3.6.0.min.js') }}"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
    <!-- Lord Icon -->
    <script src="{{ asset('front/assets/js/lord-icon-2.1.0.js') }}"></script>

    <!-- Feather Icon -->
    <script src="{{ asset('front/assets/js/feather.min.js') }}"></script>

    <!-- Theme Setting js -->
    <script src="{{ asset('front/assets/js/theme-setting.js') }}"></script>

    <!-- Script js -->
    <script src="{{ asset('front/assets/js/script.js') }}"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>


    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDwoetFWD_58gajSuz86rp6cwu6QTHqO1E&callback=initMap&v=weekly" defer></script>
    <script>
        let map;

        function initMap() {
            map = new google.maps.Map(document.getElementById("map"), {
                center: { lat: -34.397, lng: 150.644 },
                zoom: 8,
            });
        }

        window.initMap = initMap;




    </script>


    <script>
        $(".confirmOrder").submit(function(e) {
            e.preventDefault(); // avoid to execute the actual submit of the form.
            var form = $(this);
            var actionUrl = form.attr('action');
            if (document.querySelectorAll('input[name="timetoprepare"]:checked').length == 0){
                Swal.fire(
                    'Selecione o tempo de preparação'
                )
                return;
            }
            $.ajax({
                type: "POST",
                url: "{{path('confirmation/app_confirmation_order')}}",
                data: form.serialize(), // serializes the form's elements.
                beforeSend: function(){
                    Swal.fire({
                        title: 'A Enviar',
                        html: '<span style="font-size: 130px" class="iconify" data-icon="eos-icons:loading"></span>',// add html attribute if you want or remove
                        allowOutsideClick: false,
                        showCancelButton: false,
                        showConfirmButton: false,
                        onBeforeOpen: () => {
                            Swal.showLoading()
                        },
                    });
                },
                success: function(data)
                {
                    const OrderStatus = data.status;
                    if(OrderStatus != 1){
                        Swal.fire({
                            icon: 'error',
                            title: 'Não podemos proceder ao envio',
                            html: '<b>Motivos:</b>' +
                                '<ul>' +
                                '<li>Produto não Sincronizado</li>' +
                                '<li>POS principal Desligado</li>' +
                                '<li>Falha da Internet (Internet Lento)</li>' +
                                '</ul><br>' +
                                '<p>Se após 2 - 3 tentativas de envio continuar aparecer a mesma mensagem entra em contacto!</p>',
                        });

                    } else {
                        setTimeout(function() {

                            location.reload();
                        }, 1000);

                    }


                },error: function (data) {
                    console.log(data)
                }
            });
        });


        $(".readyorder").submit(function(e) {
            e.preventDefault(); // avoid to execute the actual submit of the form.
            var form = $(this);
            var actionUrl = form.attr('action');
            $.ajax({
                type: "POST",
                url: "{{path('confirmation/app_ready_order')}}",
                data: form.serialize(), // serializes the form's elements.
                beforeSend: function(){
                    Swal.fire({
                        title: 'A Enviar',
                        html: '<span style="font-size: 130px" class="iconify" data-icon="eos-icons:loading"></span>',// add html attribute if you want or remove
                        allowOutsideClick: false,
                        showCancelButton: false,
                        showConfirmButton: false,
                        onBeforeOpen: () => {
                            Swal.showLoading()
                        },
                    });
                },
                success: function(data)
                {
                    setTimeout(function() {

                        location.reload();
                    }, 1000);

                },error: (data) =>  {
                    location.reload();
                    console.log(data);
            }
            });
        });

        $(".ordertodelivery").submit(function(e) {
            e.preventDefault(); // avoid to execute the actual submit of the form.
            var form = $(this);
            var actionUrl = form.attr('action');
            $.ajax({
                type: "POST",
                url: "{{path('confirmation/app_pickup_order')}}",
                data: form.serialize(), // serializes the form's elements.
                beforeSend: function(){
                    Swal.fire({
                        title: 'A Enviar',
                        html: '<span style="font-size: 130px" class="iconify" data-icon="eos-icons:loading"></span>',// add html attribute if you want or remove
                        allowOutsideClick: false,
                        showCancelButton: false,
                        showConfirmButton: false,
                        onBeforeOpen: () => {
                            Swal.showLoading()
                        },
                    });
                },
                success: function(data)
                {
                    setTimeout(function() {

                        location.reload();
                    }, 1000);

                }, erro: data => {
                    location.reload();
                    console.log(data);
                }
            });
        });



        $(".deliveredorder").submit(function(e) {
            e.preventDefault(); // avoid to execute the actual submit of the form.
            var form = $(this);
            var actionUrl = form.attr('action');
            $.ajax({
                type: "POST",
                url: "{{path('confirmation/app_delivered_order')}}",
                data: form.serialize(), // serializes the form's elements.
                beforeSend: function(){
                    Swal.fire({
                        title: 'A Enviar',
                        html: '<span style="font-size: 130px" class="iconify" data-icon="eos-icons:loading"></span>',// add html attribute if you want or remove
                        // allowOutsideClick: false,
                        showCancelButton: false,
                        showConfirmButton: false,
                        onBeforeOpen: () => {
                            Swal.showLoading()
                        },
                    });
                },
                success: function(data)
                {
                    var OrderStatus = data.status;

                    if(OrderStatus != 1){
                        Swal.fire({
                            icon: 'error',
                            title: 'Não podemos proceder ao envio',
                            html: '<b>Motivos:</b>' +
                                '<ul>' +
                                '<li>Produto não Sincronizado</li>' +
                                '<li>POS principal Desligado</li>' +
                                '<li>Falha da Internet (Internet Lento)</li>' +
                                '</ul><br>' +
                                '<p>Se após 2 - 3 tentativas de envio continuar aparecer a mesma mensagem entra em contacto!</p>',
                        });

                    } else {
                        setTimeout(function() {

                            location.reload();
                        }, 1000);

                    }
                }
            });
        });


    </script>

{% endblock %}
